<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floresta da Calma</title>
    <style>
        body {
            background-image: url('imagens/A_serene_magical_forest_with_vibrant_trees_glowing.png');
            background-size: cover;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            color: white;
            font-family: Arial, sans-serif;
        }
        #characterContainer {
            display: flex;
            justify-content: space-around;
            width: 80%;
            margin: 20px 0;
        }
        .character {
            cursor: pointer;
            text-align: center;
        }
        #messages {
            margin-top: 20px;
            font-size: 18px;
            animation: fade-in 2s;
        }
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        #calmiCircle {
            display: none;
            margin-top: 20px;
        }
        #tempestadeCloud {
            display: none;
            position: relative;
            margin-top: 20px;
            opacity: 1;
        }
        #luziaButton {
            display: none;
            margin-top: 10px;
        }
        #stopButton {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Bem-vindo à Floresta da Calma</h1>
    <div id="characterContainer">
        <div class="character" onclick="showCharacter('calmi')">
            <img src="imagens/calmi.png" alt="Calmi" width="100">
            <p>Calmi</p>
        </div>
        <div class="character" onclick="showCharacter('luzia')">
            <img src="imagens/luzia.png" alt="Luzia" width="100">
            <p>Luzia</p>
        </div>
        <div class="character" onclick="showCharacter('tempestade')">
            <img src="imagens/tempestade.png" alt="Tempestade" width="100">
            <p>Tempestade</p>
        </div>
    </div>
    <div id="calmiCircle">
        <canvas id="circleCanvas" width="200" height="200"></canvas>
    </div>
    <div id="tempestadeCloud">
        <img src="imagens/nuvem.png" alt="Nuvem" width="200">
    </div>
    <div id="messages"></div>
    <div id="luziaButton">
        <button onclick="changeLuziaMessage()">Mudar Mensagem de Luzia</button>
    </div>
    <button id="stopButton" onclick="stopMusic()">Parar Música</button>

    <script>
        const calmiMessages = [
            "Respire profundamente... inale... exale...",
            "Você está seguro e em paz.",
            "Sinta a calma invadindo seu corpo.",
            "A cada respiração, relaxe mais.",
            "Seu corpo está desacelerando, você está seguro.",
            "Acalme sua mente, foque no agora.",
            "Permita que o ar encha seus pulmões lentamente.",
            "Deixe a tensão sair com cada expiração.",
            "Sinta seu coração batendo devagar e suave.",
            "Você está no controle da sua respiração.",
            "Acalme-se... você está em um lugar seguro.",
            "Sua respiração é sua âncora, foque nela.",
            "Permita-se relaxar, tudo vai ficar bem.",
            "Sinta o ar entrando... e saindo calmamente.",
            "Sua mente está calma, você está em paz.",
            "O presente é o que importa, você está aqui agora.",
            "Desacelere, permita-se sentir a calma.",
            "Seu corpo está relaxando a cada respiração.",
            "Tudo está bem, foque na sua respiração.",
            "Relaxe, sinta a tranquilidade tomando conta de você."
        ];

        const luziaMessages = [
            "Você é incrível do jeito que é!",
            "Acredite em si mesma!",
            "Sua autoestima é sua força!",
            "Você merece amor e respeito!",
            "Você é única e especial.",
            "Suas conquistas são importantes.",
            "Você é mais forte do que pensa.",
            "Sua autenticidade é sua beleza.",
            "Você é capaz de realizar grandes coisas.",
            "Seja gentil consigo mesma.",
            "Você merece tudo o que deseja.",
            "Seu valor é inestimável.",
            "Você tem o poder dentro de você.",
            "Confie em si mesma, você pode.",
            "Você é suficiente.",
            "Você é amada e apreciada.",
            "Seja você mesma, sempre.",
            "Você é uma inspiração.",
            "Você é digna de felicidade.",
            "Sua luz interior brilha intensamente."
        ];

        const tempestadeMessages = [
            "É normal sentir raiva... vamos respirar juntos.",
            "A nuvem vai embora... sinta a calma chegando.",
            "Você pode controlar sua raiva.",
            "Liberte-se do que te incomoda.",
            "A raiva vai passar, respire fundo.",
            "Foque na sua respiração e deixe a tensão sair.",
            "Seu corpo precisa de calma agora, respire.",
            "A raiva não te define, você está no controle.",
            "Solte a raiva com cada expiração.",
            "Você tem o poder de se acalmar.",
            "Respire fundo e sinta a tranquilidade voltando.",
            "Não deixe a raiva dominar, você é mais forte.",
            "Permita que a nuvem de raiva se dissipe.",
            "Sua calma é mais forte do que sua raiva.",
            "Respire profundamente e sinta o alívio.",
            "Cada respiração te traz mais controle.",
            "Acalme-se, você está no comando de suas emoções.",
            "Liberte-se da raiva... sinta-se mais leve.",
            "Sua paz interior está voltando.",
            "Tudo bem sentir raiva, mas agora é hora de deixá-la ir."
        ];

        let calmiIndex = 0;
        let luziaIndex = 0;
        let tempestadeIndex = 0;
        let currentAudio = null;

        function playMusic(musicPath) {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }
            currentAudio = new Audio(musicPath);
            currentAudio.play();
        }

        function stopMusic() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }
        }

        function showCharacter(character) {
            stopMusic(); // Para a música ao trocar de personagem
            document.getElementById('messages').innerHTML = '';
            document.getElementById('calmiCircle').style.display = 'none';
            document.getElementById('tempestadeCloud').style.display = 'none';
            document.getElementById('luziaButton').style.display = 'none';

            if (character === 'calmi') {
                playMusic('musicas/musica_calmi.mp3');
                showCalmi();
            } else if (character === 'luzia') {
                playMusic('musicas/musica_luzia.mp3');
                showLuzia();
            } else if (character === 'tempestade') {
                playMusic('musicas/musica_tempestade.mp3');
                showTempestade();
            }
        }

        function showCalmi() {
            document.getElementById('calmiCircle').style.display = 'block';
            animateBreathingCircle();
            displayMessage(calmiMessages);
        }

        function showLuzia() {
            luziaIndex = Math.floor(Math.random() * luziaMessages.length);
            document.getElementById('messages').innerHTML = luziaMessages[luziaIndex];
            document.getElementById('luziaButton').style.display = 'block';
        }

        function showTempestade() {
            document.getElementById('tempestadeCloud').style.display = 'block';
            displayMessage(tempestadeMessages);
            animateDissipatingCloud();
        }

        function displayMessage(messages) {
            let index = 0;
            const interval = setInterval(() => {
                if (index < messages.length) {
                    document.getElementById('messages').innerHTML = messages[index];
                    index++;
                } else {
                    clearInterval(interval);
                }
            }, 3000);
        }

        function animateBreathingCircle() {
            const canvas = document.getElementById('circleCanvas');
            const ctx = canvas.getContext('2d');
            let radius = 50;
            let growing = true;

            const breathingAnimation = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.beginPath();
                ctx.arc(canvas.width / 2, canvas.height / 2, radius,
                ctx.arc(canvas.width / 2, canvas.height / 2, radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(0, 150, 255, 0.3)'; // Azul claro e transparente
                ctx.fill();
                ctx.closePath();

                if (growing) {
                    radius += 0.5; // Movimentos mais lentos
                    if (radius >= 80) growing = false;
                } else {
                    radius -= 0.5;
                    if (radius <= 50) growing = true;
                }

                requestAnimationFrame(breathingAnimation);
            };
            breathingAnimation();
        }

        function animateDissipatingCloud() {
            const cloud = document.getElementById('tempestadeCloud');
            let opacity = 1;

            const dissipateAnimation = () => {
                if (opacity > 0) {
                    opacity -= 0.01; // Animação lenta para a nuvem se dissipar
                    cloud.style.opacity = opacity;
                    requestAnimationFrame(dissipateAnimation);
                }
            };
            dissipateAnimation();
        }

        function changeLuziaMessage() {
            luziaIndex = (luziaIndex + 1) % luziaMessages.length;
            document.getElementById('messages').innerHTML = luziaMessages[luziaIndex];
        }
    </script>
</body>
</html>
