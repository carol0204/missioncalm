<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floresta da Calma</title>
    <style>
        body {
            background-image: url('imagens/A_serene_magical_forest_with_vibrant_trees_glowing.png');
            background-size: cover;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            color: white;
            font-family: Arial, sans-serif;
        }
        #characterContainer {
            display: flex;
            justify-content: space-around;
            width: 80%;
            margin: 20px 0;
        }
        .character {
            cursor: pointer;
            text-align: center;
        }
        #messages {
            margin-top: 20px;
            font-size: 18px;
            animation: fade-in 2s;
        }
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        #calmiCircle {
            display: none;
            margin-top: 20px;
        }
        #tempestadeCloud {
            display: none;
            position: relative;
            margin-top: 20px;
            opacity: 1; /* Garantindo que a nuvem começa visível */
        }
        #luziaButton {
            display: none;
            margin-top: 10px;
        }
        #stopButton {
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Bem-vindo à Floresta da Calma</h1>
    <div id="characterContainer">
        <div class="character" onclick="showCharacter('calmi')">
            <img src="imagens/calmi.png" alt="Calmi" width="150">
            <p>Calmi</p>
        </div>
        <div class="character" onclick="showCharacter('luzia')">
            <img src="imagens/luzia.png" alt="Luzia" width="150">
            <p>Luzia</p>
        </div>
        <div class="character" onclick="showCharacter('tempestade')">
            <img src="imagens/tempestade.png" alt="Tempestade" width="150">
            <p>Tempestade</p>
        </div>
    </div>
    <div id="calmiCircle">
        <canvas id="circleCanvas" width="200" height="200"></canvas>
    </div>
    <div id="tempestadeCloud">
        <img src="imagens/nuvem.png" alt="Nuvem" width="200">
    </div>
    <div id="messages"></div>
    <div id="luziaButton">
        <button onclick="changeLuziaMessage()">Mudar Mensagem de Luzia</button>
    </div>
    <div id="stopButton">
        <button onclick="stopMusic()">Parar Música</button>
    </div>

    <script>
        const calmiMessages = [
            "Respire profundamente... inale... exale...",
            "Você está seguro e em paz.",
            "Sinta a calma invadindo seu corpo.",
            "A cada respiração, relaxe mais.",
            "Este momento é seu, respire devagar.",
            "Você está no controle de suas emoções.",
            "Acalme sua mente, foque na respiração.",
            "Respire, você está no presente.",
            "Cada respiração alivia a tensão.",
            "Sua mente pode encontrar paz.",
            "Devagar... respire e solte.",
            "Sinta o ar entrando... e saindo...",
            "Você é capaz de encontrar a calma.",
            "Sua respiração traz serenidade.",
            "Você está protegido aqui.",
            "Nada mais importa agora, apenas respire.",
            "Solte os pensamentos que te incomodam.",
            "Respire... e deixe o corpo relaxar.",
            "Sua respiração é o caminho para a paz.",
            "A cada inspiração, você encontra calma."
        ];

        const luziaMessages = [
            "Você é incrível do jeito que é!",
            "Acredite em si mesma!",
            "Sua autoestima é sua força!",
            "Você merece amor e respeito!",
            "Você é suficiente, exatamente como é.",
            "A sua luz interior brilha intensamente.",
            "Você é capaz de conquistar qualquer coisa.",
            "Confie no seu valor.",
            "Você faz a diferença no mundo.",
            "Seu coração é cheio de bondade.",
            "Você é uma pessoa única e especial.",
            "Seus esforços são dignos de reconhecimento.",
            "Você tem talentos incríveis!",
            "Você merece todo o amor e sucesso.",
            "Você é corajoso e capaz.",
            "O seu valor é inegável.",
            "Você é uma pessoa maravilhosa.",
            "Você tem um propósito valioso.",
            "Você é amada por quem você é.",
            "A sua presença é importante."
        ];

        const tempestadeMessages = [
            "É normal sentir raiva... vamos respirar juntos.",
            "A nuvem vai embora... sinta a calma chegando.",
            "Você pode controlar sua raiva.",
            "Liberte-se do que te incomoda.",
            "Respire... a raiva diminui.",
            "Você é mais forte que a raiva.",
            "Deixe a tensão ir embora... aos poucos.",
            "Seu coração pode encontrar calma.",
            "A raiva é passageira, você é permanente.",
            "Solte o que te prende.",
            "Você tem o controle, respire devagar.",
            "Deixe a raiva se dissipar como uma nuvem.",
            "Você está seguro, a raiva vai embora.",
            "Você consegue transformar raiva em tranquilidade.",
            "Vamos respirar até a nuvem passar.",
            "A raiva não define você.",
            "Respire e sinta a calma tomando conta.",
            "Você é capaz de se acalmar.",
            "A raiva se dissipa como o vento.",
            "Você está no controle, sempre."
        ];

        let currentAudio = null;

        function playMusic(musicPath) {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }
            currentAudio = new Audio(musicPath);
            currentAudio.play();
            document.getElementById('stopButton').style.display = 'block'; // Exibe o botão para parar a música
        }

        function stopMusic() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }
            document.getElementById('stopButton').style.display = 'none'; // Esconde o botão após parar a música
        }

        function showCharacter(character) {
            stopMusic(); // Para a música ao trocar de personagem
            document.getElementById('messages').innerHTML = '';
            document.getElementById('calmiCircle').style.display = 'none';
            document.getElementById('tempestadeCloud').style.display = 'none';
            document.getElementById('luziaButton').style.display = 'none';

            if (character === 'calmi') {
                playMusic('musicas/musica_calmi.mp3');
                showCalmi();
            } else if (character === 'luzia') {
                playMusic('musicas/musica_luzia.mp3');
                showLuzia();
            } else if (character === 'tempestade') {
                playMusic('musicas/musica_tempestade.mp3');
                showTempestade();
            }
        }

        function showCalmi() {
            document.getElementById('calmiCircle').style.display = 'block';
            animateBreathingCircle();
            displayMessage(calmiMessages);
        }

        function showLuzia() {
            luziaIndex = Math.floor(Math.random() * luziaMessages.length);
            document.getElementById('messages').innerHTML = luziaMessages[luziaIndex];
            document.getElementById('luziaButton').style.display = 'block';
        }

        function showTempestade() {
            document.getElementById('tempestadeCloud').style.display = 'block';
            displayMessage(tempestadeMessages);
            animateDissipatingCloud();
        }

        function displayMessage(messages) {
            let index = 0;
            const interval = setInterval(() => {
                if (index < messages.length) {
                    document.getElementById('messages').innerHTML = messages[index];
                    index++;
                } else {
                    clearInterval(interval);
                }
            }, 3000);
        }

        function animateBreathingCircle() {
            const canvas = document.getElementById('circleCanvas');
            const ctx = canvas.getContext('2d');
            let radius = 50;
            let growing = true;

            const breathingAnimation = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.beginPath();
                ctx.arc(canvas.width / 2, canvas.height / 2, radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(0, 150, 255, 0.3)'; // Azul claro e transparente
                ctx.fill();
                ctx.closePath();

                if (growing) {
                    radius += 0.3; // Movimentos suaves e lentos
                    if (radius >= 80) growing = false;
                } else {
                    radius -= 0.3;
                    if (radius <= 50) growing = true;
                }

                requestAnimationFrame(breathingAnimation);
            };
            breathingAnimation();
        }

        function animateDissipatingCloud() {
            const cloud = document.getElementById('tempestadeCloud');
            let opacity = 1;

            const dissipateAnimation = () => {
                if (opacity > 0) {
                    opacity -= 0.01; // Dissipação lenta da nuvem
                    cloud.style.opacity = opacity;
                    requestAnimationFrame(dissipateAnimation);
                }
            };
            dissipateAnimation();
        }

        function changeLuziaMessage() {
            luziaIndex = (luziaIndex + 1) % luziaMessages.length;
            document.getElementById('messages').innerHTML = luziaMessages[luziaIndex];
        }
    </script>
</body>
</html>
